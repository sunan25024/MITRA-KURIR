<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Scan Paket Kurir</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
    .section { display: none; max-width: 700px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
    .active { display: block; }
    input, button { width: 100%; padding: 10px; margin: 8px 0; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; }
    button { background: #1e40af; color: white; font-weight: bold; cursor: pointer; }
    button:hover { background: #1d4ed8; }
    #barcodeList .item { display: flex; justify-content: space-between; align-items: center; padding: 8px; border-bottom: 1px solid #eee; }
    .delete { background: red; color: white; border: none; padding: 5px 10px; border-radius: 4px; font-size: 12px; }
    .status-box { padding: 3px 6px; border-radius: 4px; font-size: 12px; margin-left: 8px; display: inline-block; }
    .status-proses { background-color: red; color: white; }
    .status-terkirim { background-color: green; color: white; }
  </style>
</head>
<body>

<!-- Page 1 -->
<div id="page1" class="section active">
  <h2>Login Kurir</h2>
  <input id="id" placeholder="ID Mitra">
  <input id="nama" placeholder="Nama Lengkap">
  <input id="nik" placeholder="NIK (16 digit)" maxlength="16" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
  <button onclick="goToPage2()">Masuk</button>
</div>

<!-- Page 2 -->
<div id="page2" class="section">
  <h2>Data Paket Dibawa</h2>
  <input id="jumlah" type="number" placeholder="Jumlah Paket">
  <input id="cod" type="number" placeholder="Jumlah Paket COD">
  <input id="noncod" type="number" placeholder="Jumlah Paket NON COD">
  <div id="reader" style="width: 100%; max-width: 400px; margin: auto;"></div>
  <div id="barcodeList"></div>
  <button onclick="goToPage3()">Lanjut</button>
</div>

<!-- Page 3 -->
<div id="page3" class="section">
  <h2>Upload Foto Tiap Paket</h2>
  <div id="fotoList"></div>
  <button onclick="goToPage4()">Lanjut</button>
</div>

<!-- Page 4 -->
<div id="page4" class="section">
  <h2>Pending Paket</h2>
  <div id="pendingList"></div>
  <button onclick="goToPage5()">Selesai</button>
</div>

<!-- Page 5 -->
<div id="page5" class="section">
  <h2>Ringkasan</h2>
  <canvas id="summaryChart" width="300" height="300"></canvas>
  <button onclick="kirimDummy()">Kirim Dummy</button>
</div>

<script>
// ... seluruh kode JavaScript sebelumnya tetap

function kirimDummy() {
  fetch("https://script.google.com/macros/s/AKfycbzjl3cl3xpGWsdWGdJyPfY5oUS8BbDUCxQaX3DrUMXEsTYI4HHH6wWF2IfyAuBtOG1Y/exec", {
    method: 'POST',
    body: JSON.stringify({
      id: "D001",
      nama: "Budi Santoso",
      nik: "1234567890123456",
      cod: 2,
      noncod: 3,
      barcodes: [
        "001442365534",
        "002724952743",
        "002716339539",
        "002564893621",
        "001442365535"
      ],
      foto: {
        "001442365534": "https://via.placeholder.com/100?text=Terkirim1",
        "002724952743": "https://via.placeholder.com/100?text=Terkirim2"
      }
    }),
    headers: { "Content-Type": "application/json" }
  })
  .then(res => res.text())
  .then(msg => alert("✅ Dummy berhasil dikirim: " + msg))
  .catch(err => alert("❌ Gagal: " + err));
}
</script>
</body>
</html>
